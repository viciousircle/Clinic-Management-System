<div class="modal fade" id="healthCheckModal" tabindex="-1" aria-labelledby="healthCheckModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="healthCheckModalLabel">Health Check</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Sidebar for Scrollspy -->
                    <div class="col-md-3">
                        <div id="scrollspyMenu" class="list-group">
                            <a class="list-group-item list-group-item-action" href="#patientInfo">Patient
                                Information</a>
                            <a class="list-group-item list-group-item-action" href="#symptoms">Symptoms</a>
                            <a class="list-group-item list-group-item-action" href="#healthRecords">Health Records</a>
                            <a class="list-group-item list-group-item-action" href="#diagnosis">Diagnosis</a>
                            <a class="list-group-item list-group-item-action" href="#prescription">Prescription</a>
                            <a class="list-group-item list-group-item-action" href="#commitAndRules">Commit & Rules</a>
                        </div>
                    </div>

                    <!-- Main Content Area -->
                    <div class="col-md-9 overflow-auto" data-bs-spy="scroll" data-bs-target="#scrollspyMenu"
                        data-bs-offset="0" tabindex="0" style="max-height: 70vh; overflow-y: scroll;">
                        <!-- Patient Information Section -->
                        <section id="patientInfo" class="mb-5">
                            <h5>Patient Information</h5>
                            <form>
                                <div class="mb-3">
                                    <label for="patientName" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="patientName" placeholder="Enter name"
                                        autocomplete="off" required>
                                </div>
                                <div class="mb-3">
                                    <label for="patientAge" class="form-label">Age</label>
                                    <input type="number" class="form-control" id="patientAge" placeholder="Enter age"
                                        required>
                                </div>
                            </form>
                        </section>

                        <!-- Symptoms Section -->
                        <section id="symptoms" class="mb-5">
                            <h5>Symptoms</h5>
                            <textarea class="form-control" id="symptomsInput" rows="4"
                                placeholder="Describe symptoms"></textarea>
                        </section>

                        <!-- Health Records Section -->
                        <section id="healthRecords" class="mb-5">
                            <h5>Health Records</h5>
                            <textarea class="form-control" id="healthRecordsInput" rows="4"
                                placeholder="Add past health records"></textarea>
                        </section>

                        <!-- Diagnosis Section -->
                        <section id="diagnosis" class="mb-5">
                            <h5>Diagnosis</h5>
                            <textarea class="form-control" id="diagnosisInput" rows="4"
                                placeholder="Doctor's diagnosis"></textarea>
                        </section>

                        <!-- Prescription Section -->
                        <section id="prescription" class="mb-5">
                            <h5>Prescription</h5>
                            <textarea class="form-control" id="prescriptionInput" rows="4"
                                placeholder="Add prescription details"></textarea>
                        </section>

                        <!-- Commit & Rules Section -->
                        <section id="commitAndRules" class="mb-5">
                            <h5>Commit & Rules</h5>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rule1" required>
                                <label class="form-check-label" for="rule1">
                                    Rule 1: Ensure patient consent is obtained.
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rule2" required>
                                <label class="form-check-label" for="rule2">
                                    Rule 2: Verify all entered data is correct.
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rule3" required>
                                <label class="form-check-label" for="rule3">
                                    Rule 3: Follow hospital guidelines strictly.
                                </label>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="markAsDone()">Mark as Done</button>
            </div>
        </div>
    </div>
</div>

<script>
    function markAsDone() {
        const formData = {
            patientName: document.getElementById('patientName').value,
            patientAge: document.getElementById('patientAge').value,
            symptoms: document.getElementById('symptomsInput').value,
            healthRecords: document.getElementById('healthRecordsInput').value,
            diagnosis: document.getElementById('diagnosisInput').value,
            prescription: document.getElementById('prescriptionInput').value,
            rulesChecked: Array.from(document.querySelectorAll('#commitAndRules input:checked')).map(
                (checkbox) => checkbox.labels[0].innerText
            )
        };

        console.log("Form Data:", formData);
        alert("Health check marked as done!");

        // Reset modal and close
        document.getElementById('healthCheckForm').reset();
        document.querySelector('#healthCheckModal .btn-close').click();
    }
</script>
