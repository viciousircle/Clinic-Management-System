@page
@model OOP_Final_Project.Pages.Inventory.InventoryManagementModel
@{
    ViewData["Title"] = "Inventory Management";
}

<div class="container-fluid mt-5">
    <div class="row">
        <!-- Sidebar Section -->
        <div class="col-md-3 col-lg-2 p-3 text-dark">
            <div class="list-group">
                <a href="@Url.Page("/Inventory/InventoryDashBoard")" class="list-group-item list-group-item-action">
                    Dashboard
                </a>
                <a href="@Url.Page("/Inventory/InventoryManagement")" class="list-group-item list-group-item-secondary">
                    Inventory
                </a>
                <a href="@Url.Page("#")" class="list-group-item list-group-item-action">
                    Prescribe
                </a>
                <a href="#" class="list-group-item list-group-item-action">
                    Doctors
                </a>
                <a href="#" class="list-group-item list-group-item-action">
                    Reports
                </a>
                <a href="#" class="list-group-item list-group-item-action">
                    Settings
                </a>
            </div>
        </div>

        <!-- Main Content Section -->
        <div class="col-md-9 col-lg-10">
            <div class="text-center mb-4">
                <h1 class="fw-bold">Inventory Management</h1>
                <p class="text-muted">Manage medicines and stock levels efficiently.</p>
            </div>

            <!-- Quick Stats Section -->
            <div class="container mt-4">
                <div class="row justify-content-center">
                    <!-- Total Medicines -->
                    <div class="col-md-4">
                        <div class="card shadow border-0 rounded-3">
                            <div class="card-header bg-dark text-white text-center">
                                <i class="fas fa-pills me-2"></i> Total Medicines
                            </div>
                            <div class="card-body text-center">
                                <h2 class="fw-bold text-primary">skdmsdm</h2>
                                <p class="text-muted mb-0">Available in inventory</p>
                            </div>
                        </div>
                    </div>

                    <!-- Expiring Soon -->
                    <div class="col-md-4">
                        <div class="card shadow border-0 rounded-3">
                            <div class="card-header bg-dark text-white text-center">
                                <i class="fas fa-exclamation-circle me-2"></i> Expiring Soon
                            </div>
                            <div class="card-body text-center">
                                <h2 class="fw-bold text-warning">dksod</h2>
                                <p class="text-muted mb-0">Medicines need attention</p>
                            </div>
                        </div>
                    </div>

                    <!-- Low Stock -->
                    <div class="col-md-4">
                        <div class="card shadow border-0 rounded-3">
                            <div class="card-header bg-dark text-white text-center">
                                <i class="fas fa-box-open me-2"></i> Low Stock
                            </div>
                            <div class="card-body text-center">
                                <h2 class="fw-bold text-danger">daskdmskd</h2>
                                <p class="text-muted mb-0">Critical stock levels</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory List Section -->
            <div class="container mt-4">
                <div class="card shadow-sm">
                    <div class="card-header bg-dark text-white">
                        <i class="fas fa-list me-2"></i> Current Inventory
                    </div>
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Medicine Name</th>
                                    <th>Type</th>
                                    <th>Quantity</th>
                                    <th>Expiry Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var medicine in Model.Medicines)
                                {
                                    <tr>
                                        <td>@medicine.Name</td>
                                        <td>@medicine.Type</td>
                                        <td>@medicine.Quantity</td>
                                        <td>@medicine.ExpiryDate.ToShortDateString()</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="editMedicine('@medicine.Id')">
                                                Edit
                                            </button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteMedicine('@medicine.Id')">
                                                Delete
                                            </button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Add Medicine Section -->
            <div class="container mt-4">
                <div class="card shadow-sm">
                    <div class="card-header bg-dark text-white">
                        <i class="fas fa-plus-circle me-2"></i> Add New Medicine
                    </div>
                    <div class="card-body">
                        <form method="post" class="needs-validation" novalidate>
                            <div class="mb-3">
                                <label for="medicineName" class="form-label">Medicine Name</label>
                                <input type="text" class="form-control" id="medicineName" name="MedicineName" required>
                                <div class="invalid-feedback">Please enter the medicine name.</div>
                            </div>
                            <div class="mb-3">
                                <label for="type" class="form-label">Type</label>
                                <select class="form-control" id="type" name="Type" required>
                                    <option value="Tablet">Tablet</option>
                                    <option value="Syrup">Syrup</option>
                                    <option value="Injection">Injection</option>
                                </select>
                                <div class="invalid-feedback">Please select the medicine type.</div>
                            </div>
                            <div class="mb-3">
                                <label for="quantity" class="form-label">Quantity</label>
                                <input type="number" class="form-control" id="quantity" name="Quantity" required>
                                <div class="invalid-feedback">Please enter the quantity.</div>
                            </div>
                            <div class="mb-3">
                                <label for="expiryDate" class="form-label">Expiry Date</label>
                                <input type="date" class="form-control" id="expiryDate" name="ExpiryDate" required>
                                <div class="invalid-feedback">Please select the expiry date.</div>
                            </div>
                            <button type="submit" class="btn btn-success">Add Medicine</button>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script>
        function deleteMedicine(id) {
            if (confirm('Are you sure you want to delete this medicine?')) {
                alert(`Medicine with ID ${id} deleted.`);
            }
        }

        function editMedicine(id) {
            alert(`Edit medicine with ID ${id}.`);
        }

        (function () {
            'use strict'
            var forms = document.querySelectorAll('.needs-validation')
            Array.prototype.slice.call(forms).forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
        })();
    </script>
}
