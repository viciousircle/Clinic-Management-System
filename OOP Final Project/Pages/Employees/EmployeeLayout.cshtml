@page
@model OOP_Final_Project.Pages.Employees.EmployeeLayoutModel
@{
}

<head>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<style>
    body {
        background-color: #f7f8ff;
        color: #195478;
    }

    .rounded-16px {
        border-radius: 16px;
    }

    .hover-effect:hover {
        background-color: #d7dbe1;
    }
</style>

<div class="pt-3 mt-5" style="background-color: #f7f8ff; font-family: Poppins, sans-serif;">
    <div class="d-flex gap-3 min-vh-100">

        <!-- Sidebar -->
        <nav class="col-md-3 col-lg-2 d-flex flex-column ps-5">
            <div class="pt-2 mt-5">
                <div class="mb-4 text-center" style="font-family: Libre Baskerville, serif;">
                    <h4><i>Welcome back, <b>Dr. Doe</b></i></h4>
                </div>
                <hr class="">
                <div class="nav flex-column">
                    <a href="#" data-page="Dashboard"
                        class="nav-link px-3 py-2 mb-2 hover-effect rounded-16px d-flex gap-4 align-items-sm-center"
                        style="color: #195478;">
                        <i class="fas fa-home"></i> Dashboard
                    </a>
                    <a href="#" data-page="Appointment"
                        class="nav-link px-3 py-2 mb-2 hover-effect rounded-16px d-flex align-items-sm-center gap-4"
                        style="color: #195478;">
                        <i class="fas fa-calendar-check"></i> Appointment
                    </a>
                    <a href="#" data-page="Patients"
                        class="nav-link px-3 py-2 mb-2 hover-effect rounded-16px d-flex align-items-sm-center gap-4"
                        style="color: #195478;">
                        <i class="fas fa-user-injured"></i> Patients
                    </a>
                    <a href="#" data-page="Schedule"
                        class="nav-link px-3 py-2 mb-2 hover-effect rounded-16px d-flex align-items-sm-center gap-4"
                        style="color: #195478;">
                        <i class="far fa-clock"></i> Schedule
                    </a>
                    <a href="#" data-page="Logout"
                        class="nav-link px-3 py-2 mb-2 hover-effect rounded-16px d-flex align-items-sm-center gap-4"
                        style="color: #195478;">
                        <i class="fas fa-sign-out-alt"></i> Log out
                    </a>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div id="main-content" class="pt-3 mx-5 mt-5 shadow-lg text-dark w-100"
            style="border-top-left-radius: 48px; border-top-right-radius: 48px; background-color: #fefefe; box-shadow: 0 0 10px rgba(23, 23, 27, 0.1);">

            <!-- Default content -->
            <div id="default-content">
                <partial name="~/Pages/Employees/Doctors/_Dashboard.cshtml" />
            </div>
        </div>

    </div>
</div>

@section Scripts {

    <script>
        $(document).ready(function () {
            // Handle sidebar link clicks
            $(".nav-link").on("click", function (e) {
                e.preventDefault(); // Prevent the default behavior

                const page = $(this).data("page"); // Get the data-page attribute

                // Send an AJAX request to load the selected partial view
                $("#main-content").load("/Employees/EmployeeLayout?handler=LoadPartial&section=" + page, function (response, status, xhr) {
                    if (status === "error") {
                        console.error("Error loading content:", xhr.status, xhr.statusText);
                        $("#main-content").html('<div class="text-danger text-center">Error loading content.</div>');
                    }
                });
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>


    <script>
        function initializeChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
                    datasets: [{
                        label: 'Appointments',
                        data: [12, 19, 3, 5, 2],
                        borderColor: '#195478',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true
                        }
                    }
                }
            });
        }


        $(document).ready(function () {
            // Initialize the chart on page load
            initializeChart();

            // Handle sidebar link clicks
            $(".nav-link").on("click", function (e) {
                e.preventDefault(); // Prevent the default behavior

                const page = $(this).data("page"); // Get the data-page attribute

                // Send an AJAX request to load the selected partial view
                $("#main-content").load("/Employees/EmployeeLayout?handler=LoadPartial&section=" + page, function (response, status, xhr) {
                    if (status === "error") {
                        console.error("Error loading content:", xhr.status, xhr.statusText);
                        $("#main-content").html('<div class="text-danger text-center">Error loading content.</div>');
                    } else {
                        // Re-initialize the chart after loading new content
                        if (page === "Dashboard") {
                            initializeChart();
                        }
                    }
                });
            });

    </script>

    <script src="/js/Employees.js"></script>

}
